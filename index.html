<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Mysterious Game</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div id="container">
      <h1 id="game-title"></h1>
      <img id="image-box" src="#" alt="Test Image" height="700" width="500">
      <div id="message">
        <p></p>
      </div>
      <div id="choices">
        <ul id="list-group">
        </ul>
      </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="js/states.js"></script>
    <script>
      draw();

      function draw(){
        var li = '';
        var currentState = state[currentStateId];
        $("#game-title").text(currentState.title);
        $("#image-box").attr('src','img/' + currentState.image + '.png');
        $("#message").find("p").text('"' + currentState.message + '"');
        $("#list-group").empty();

        for (var i = 0; i < currentState.choices.length; i++){
          li = '<li class="list-group-item" id="choice-' + i + '"> ' + currentState.choices[i].message + '</li>';
          currentStateId = currentState.choices[i].nextstate;
          $("#list-group").append(li);
          $('#choice-' + i).click(function() { draw() });
        }
      }

    </script>
  </body>
</html>
